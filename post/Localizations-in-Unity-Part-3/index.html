<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
    <meta itemprop="name" content="Localizations in Unity: Part 3 | jaredbarboza.me">
    <meta itemprop="description" content="üçï P I Z Z A is life">

    
    <meta name="twitter:title" content="Localizations in Unity: Part 3 | jaredbarboza.me">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="üçï P I Z Z A is life">
    <meta name="twitter:site" content="@codeimpossible">
    <meta name="twitter:creator" content="@codeimpossible">
    <meta name="twitter:image:src" content="http://jaredbarboza.me/social-header.png">

    
    <meta name="og:title" content="Localizations in Unity: Part 3 | jaredbarboza.me">
    <meta name="og:description" content="üçï P I Z Z A is life">
    <meta name="og:image" content="http://jaredbarboza.me/social-header-lg.png">
    <meta name="og:url" content="http://jaredbarboza.me/">
    <meta name="og:site_name" content="jaredbarboza.me">
    <meta name="og:locale" content="en_US">
    <meta name="og:type" content="website">

    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <title>Localizations in Unity: Part 3‚Äîjaredbarboza.me</title>

    <link rel="stylesheet" href="/assets/main.bundle.css">

    
  </head>
  <body class="flex flex-col min-h-screen is-post">
    <main class="container mx-auto max-w-3xl flex-grow">
      <aside class="intro">
  <a href="/">
    <img src="/me.jpg" alt="Me. I mean Jared. I mean that's me, Jared." class="rounded-full" />
  </a>
  <div class="intro-greeting mb-5">
    <h1>Hey there üëã, I'm Jared.</h1>
    <h2>Future skeleton. üêà parent. Lover of all things üçï. Dispenser of artisanal emoji, gifs and memes. They/Them.</h2>
  </div>
  <span class="social">
      <a href="https://twitter.com/codeimpossible" class="social_icon icon-twitter" title="@codeimpossible on Twitter">
          <svg width="28" height="28" viewBox="0 0 32 32" preserveAspectRatio="xMinYMin" aria-hidden="true" focusable="false">
              <use xlink:href="#icon-twitter">
                  <g id="icon-twitter"><path fill="#00c9ff" d="M 32,6.076c-1.177,0.522-2.443,0.875-3.771,1.034c 1.355-0.813, 2.396-2.099, 2.887-3.632 c-1.269,0.752-2.674,1.299-4.169,1.593c-1.198-1.276-2.904-2.073-4.792-2.073c-3.626,0-6.565,2.939-6.565,6.565 c0,0.515, 0.058,1.016, 0.17,1.496c-5.456-0.274-10.294-2.888-13.532-6.86c-0.565,0.97-0.889,2.097-0.889,3.301 c0,2.278, 1.159,4.287, 2.921,5.465c-1.076-0.034-2.088-0.329-2.974-0.821c-0.001,0.027-0.001,0.055-0.001,0.083 c0,3.181, 2.263,5.834, 5.266,6.438c-0.551,0.15-1.131,0.23-1.73,0.23c-0.423,0-0.834-0.041-1.235-0.118 c 0.836,2.608, 3.26,4.506, 6.133,4.559c-2.247,1.761-5.078,2.81-8.154,2.81c-0.53,0-1.052-0.031-1.566-0.092 c 2.905,1.863, 6.356,2.95, 10.064,2.95c 12.076,0, 18.679-10.004, 18.679-18.68c0-0.285-0.006-0.568-0.019-0.849 C 30.007,8.548, 31.12,7.392, 32,6.076z"></path></g>
              </use>
          </svg>
          <span class="a11y-only">Twitter</span>
      </a> 
      <a href="https://github.com/codeimpossible/" class="social_icon icon-github" title="@codeimpossible on GitHub">
          <svg width="28" height="28" viewBox="0 0 32 32" preserveAspectRatio="xMinYMin" aria-hidden="true" focusable="false">
              <use xlink:href="#icon-github">
                  <g id="icon-github"><path fill="#000000" d="M 16,0C 7.163,0,0,7.163,0,16s 7.163,16, 16,16s 16-7.163, 16-16S 24.837,0, 16,0z M 25.502,25.502 c-1.235,1.235-2.672,2.204-4.272,2.881c-0.406,0.172-0.819,0.323-1.238,0.453L 19.992,26.438 c0-1.26-0.432-2.188-1.297-2.781 c 0.542-0.052, 1.039-0.125, 1.492-0.219s 0.932-0.229, 1.438-0.406s 0.958-0.388, 1.359-0.633s 0.786-0.563, 1.156-0.953s 0.68-0.833, 0.93-1.328 s 0.448-1.089, 0.594-1.781s 0.219-1.456, 0.219-2.289c0-1.615-0.526-2.99-1.578-4.125c 0.479-1.25, 0.427-2.609-0.156-4.078l-0.391-0.047 c-0.271-0.031-0.758,0.083-1.461,0.344s-1.492,0.688-2.367,1.281c-1.24-0.344-2.526-0.516-3.859-0.516c-1.344,0-2.625,0.172-3.844,0.516 c-0.552-0.375-1.075-0.685-1.57-0.93c-0.495-0.245-0.891-0.411-1.188-0.5s-0.573-0.143-0.828-0.164s-0.419-0.026-0.492-0.016 s-0.125,0.021-0.156,0.031c-0.583,1.479-0.635,2.839-0.156,4.078c-1.052,1.135-1.578,2.51-1.578,4.125c0,0.833, 0.073,1.596, 0.219,2.289 s 0.344,1.286, 0.594,1.781s 0.56,0.938, 0.93,1.328s 0.755,0.708, 1.156,0.953s 0.854,0.456, 1.359,0.633s 0.984,0.313, 1.438,0.406 s 0.951,0.167, 1.492,0.219c-0.854,0.583-1.281,1.51-1.281,2.781l0,2.445 c-0.472-0.14-0.937-0.306-1.394-0.5 c-1.6-0.677-3.037-1.646-4.272-2.881c-1.235-1.235-2.204-2.672-2.881-4.272C 2.917,19.575, 2.563,17.815, 2.563,16 s 0.355-3.575, 1.055-5.23c 0.677-1.6, 1.646-3.037, 2.881-4.272s 2.672-2.204, 4.272-2.881 C 12.425,2.917, 14.185,2.563, 16,2.563s 3.575,0.355, 5.23,1.055c 1.6,0.677, 3.037,1.646, 4.272,2.881 c 1.235,1.235, 2.204,2.672, 2.881,4.272C 29.083,12.425, 29.438,14.185, 29.438,16s-0.355,3.575-1.055,5.23 C 27.706,22.829, 26.737,24.267, 25.502,25.502z"></path></g>
              </use>
          </svg>
          <span class="a11y-only">GitHub</span>
      </a> 
      <a href="/feed/" class="social_icon icon-rss" title="Jared Barboza's RSS Feed">
          <svg width="28" height="28" viewBox="0 0 32 32" preserveAspectRatio="xMinYMin" aria-hidden="true" focusable="false">
              <use xlink:href="#icon-feed">
                  <g id="icon-feed"><path fill="#ff9132" d="M 4.259,23.467c-2.35,0-4.259,1.917-4.259,4.252c0,2.349, 1.909,4.244, 4.259,4.244 c 2.358,0, 4.265-1.895, 4.265-4.244C 8.525,25.383, 6.618,23.467, 4.259,23.467zM 0.005,10.873l0,6.133 c 3.993,0, 7.749,1.562, 10.577,4.391c 2.825,2.822, 4.384,6.595, 4.384,10.603l 6.16,0 C 21.125,20.349, 11.648,10.873, 0.005,10.873zM 0.012,0l0,6.136 c 14.243,0, 25.836,11.604, 25.836,25.864L 32,32 C 32,14.36, 17.648,0, 0.012,0z"></path></g>
              </use>
          </svg>
          <span class="a11y-only">RSS</span>
      </a>
  </span>
</aside>
      
    <div>
        <h1>Localizations in Unity: Part 3</h1>

        

        
            <span class="text-sm">üìÜ <em>Created on
                    <span datetime="Wed Aug 25 2021 00:00:00 GMT+0000 (Coordinated Universal Time)">August 25, 2021</span>.</em></span>
        

        
            <span class="pl-10 mb-2 tags">
                <span>üîñ</span>
                <a class="tag tag-inline" href="/tag/unity3d">unity3d</a><a class="tag tag-inline" href="/tag/game-development">game-development</a><a class="tag tag-inline" href="/tag/localization">localization</a>
            </span>
        

        <div class="content post">
            <p>In my <a href="/post/localizations-in-unity-part-2">previous post</a> I showed how I created a custom importer for localization data using Unitys <a href="https://docs.unity3d.com/Manual/ScriptedImporters.html">ScriptedImporter</a> system.</p>
<p>In this post I'll show how to build out some components to allow us to access the translation data from different areas of our game.</p>
<p>to display a translated text value in the game we'll need to know three pieces of information:</p>
<ol>
<li>The key we want the translation for</li>
<li>The localization set that contains the key</li>
<li>The langauge we want the translated value for</li>
</ol>
<p>So how do we collect all these pieces of information in an easy and straightforward way?</p>
<h2>LocalizedString is here to help</h2>
<p>Enter the <code>LocalizedString</code> class.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><br><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span><br><br><span class="token keyword">namespace</span> <span class="token namespace">Localization<span class="token punctuation">.</span>Data</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Serializable</span></span><span class="token punctuation">]</span><br>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalizedString</span> <span class="token punctuation">{</span><br>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> _keyName<span class="token punctuation">;</span><br>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> _setName<span class="token punctuation">;</span><br><br>        <span class="token keyword">public</span> <span class="token function">LocalizedString</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> setName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> keyName<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            _keyName <span class="token operator">=</span> keyName<span class="token punctuation">;</span><br>            _setName <span class="token operator">=</span> setName<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LocalizationSetName <span class="token operator">=></span> _setName<span class="token punctuation">;</span><br><br>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> KeyName <span class="token operator">=></span> _keyName<span class="token punctuation">;</span><br><br>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>This is going to be the main way we interact with our localization system. Whenever we request a translation it will be via the <code>LocalizedString</code> class. Right now the <code>GetValue()</code> method is hard coded to return null, but eventually we'll have this wired up to return the correct translation value.</p>
<p>But first we need to store a few pieces of data so our game can know what the active language is and what languages we support. Let's create a <code>LocalizationConfig</code> scriptable object to hold that information.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> <span class="token namespace">Localization<span class="token punctuation">.</span>Data</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CreateAssetMenu</span><span class="token attribute-arguments"><span class="token punctuation">(</span>fileName <span class="token operator">=</span> <span class="token string">"LocalizationConfig.asset"</span><span class="token punctuation">,</span> menuName <span class="token operator">=</span> <span class="token string">"Game/Localization/Config"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><br>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalizationConfig</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptableObject</span></span> <span class="token punctuation">{</span><br>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name">LocalizationLanguages</span> _availableLanguages<span class="token punctuation">;</span><br>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> _currentLanguage<span class="token punctuation">;</span><br>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>LocalizationSet<span class="token punctuation">></span></span> _localizationSets<span class="token punctuation">;</span><br><br>        <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>LocalizationSet<span class="token punctuation">></span></span> LocalizationSets <span class="token operator">=></span> _localizationSets<span class="token punctuation">;</span><br><br>        <span class="token keyword">public</span> <span class="token return-type class-name">LocalizationLanguages</span> AvailableLanguages <span class="token punctuation">{</span><br>            <span class="token keyword">get</span> <span class="token operator">=></span> _availableLanguages<span class="token punctuation">;</span><br>            <span class="token keyword">set</span> <span class="token operator">=></span> _availableLanguages <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> CurrentLanguage <span class="token punctuation">{</span><br>            <span class="token keyword">get</span> <span class="token operator">=></span> _currentLanguage<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetCurrentLaguage</span><span class="token punctuation">(</span><span class="token class-name">LocalizationLanguages</span> currentLanguage<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            _currentLanguage <span class="token operator">=</span> currentLanguage<span class="token punctuation">.</span><span class="token function">ToBCP47</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>This looks like it will do what we want. However, it's using a type we've not seen before: <code>LocalizationLanguages</code>. This is an enum type that we'll use to make picking the supported languages easier in the inspector UI. It has the <code>[Flags]</code> attribute which will allow us to pick multiple values here, as long as they are powers of 2.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Flags</span></span><span class="token punctuation">]</span><br><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">LocalizationLanguages</span> <span class="token punctuation">{</span><br>    Arabic <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><br>    Czech <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span><br>    Danish <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span><br>    German <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span><br>    Modern <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">,</span><br>    English <span class="token operator">=</span> <span class="token number">32</span><span class="token punctuation">,</span><br>    Spanish <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">,</span><br>    Finnish <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">,</span><br>    French <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">,</span><br>    Hebrew <span class="token operator">=</span> <span class="token number">512</span><span class="token punctuation">,</span><br>    Hindi <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">,</span><br>    Hungarian <span class="token operator">=</span> <span class="token number">2048</span><span class="token punctuation">,</span><br>    Indonesian <span class="token operator">=</span> <span class="token number">4096</span><span class="token punctuation">,</span><br>    Italian <span class="token operator">=</span> <span class="token number">8192</span><span class="token punctuation">,</span><br>    Japanese <span class="token operator">=</span> <span class="token number">16384</span><span class="token punctuation">,</span><br>    Korean <span class="token operator">=</span> <span class="token number">32768</span><span class="token punctuation">,</span><br>    Dutch <span class="token operator">=</span> <span class="token number">65536</span><span class="token punctuation">,</span><br>    Norwegian <span class="token operator">=</span> <span class="token number">131072</span><span class="token punctuation">,</span><br>    Polish <span class="token operator">=</span> <span class="token number">262144</span><span class="token punctuation">,</span><br>    Portuguese <span class="token operator">=</span> <span class="token number">524288</span><span class="token punctuation">,</span><br>    Romanian <span class="token operator">=</span> <span class="token number">1048576</span><span class="token punctuation">,</span><br>    Russian <span class="token operator">=</span> <span class="token number">2097152</span><span class="token punctuation">,</span><br>    Slovak <span class="token operator">=</span> <span class="token number">4194304</span><span class="token punctuation">,</span><br>    Swedish <span class="token operator">=</span> <span class="token number">8388608</span><span class="token punctuation">,</span><br>    Thai <span class="token operator">=</span> <span class="token number">16777216</span><span class="token punctuation">,</span><br>    Turkish <span class="token operator">=</span> <span class="token number">33554432</span><span class="token punctuation">,</span><br>    Chinese <span class="token operator">=</span> <span class="token number">67108864</span><br><span class="token punctuation">}</span></code></pre>
<p>Now we just need some extension methods to convert our languages into their appropriate two-character language codes:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">LocalizationLanguageExtensions</span> <span class="token punctuation">{</span><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name">T<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token generic-method"><span class="token function">GetFlags</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">T</span> flagsEnumValue<span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Enum</span></span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> Enum<br>            <span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Cast</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>e <span class="token operator">=></span> flagsEnumValue<span class="token punctuation">.</span><span class="token function">HasFlag</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ToBCP47</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">LocalizationLanguages</span> language<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> flag <span class="token keyword">in</span> language<span class="token punctuation">.</span><span class="token function">GetFlags</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Arabic<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"ar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Czech<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"cs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Danish<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"da"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>German<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"de"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Modern<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>English<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Spanish<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"es"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Finnish<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"fi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>French<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"fr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Hebrew<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"he"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Hindi<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Hungarian<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"hu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Indonesian<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Italian<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"it"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Japanese<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"ja"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Korean<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"ko"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Dutch<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"nl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Norwegian<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"no"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Polish<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"pl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Portuguese<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"pt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Romanian<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"ro"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Russian<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"ru"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Slovak<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"sk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Swedish<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"sv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Thai<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"th"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Turkish<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"tr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">case</span> LocalizationLanguages<span class="token punctuation">.</span>Chinese<span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"zh"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>                <span class="token keyword">default</span><span class="token punctuation">:</span> result<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> String<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>I know that looks like a ton of code, <em>and it <strong>is</strong></em>, but it's very very basic code. Unfortunately for me (not you, you can just copy paste this mess into your game), c# doesn't really have anything to help us out here, so I had to type all this out by hand originally.</p>
<p>Now we can create our localization config object using the GameObject menu: <strong>Create -&gt; Game -&gt; Localization -&gt; Config</strong>, and when you open that object in the inspector you should have something that looks similar to the image below.</p>
<img src="/electricnoir/LocalizationConfig.png" />
<p><em>In the future, we could build out a UI within our game to allow the user to select an active language from the list of supported languages, but for now I'll leave this as an exercise for you to take care of... unless I happen to build it out before you do, in which case, just keep checking back here I guess...</em></p>
<p>We need a component that will be readily available to the rest of our codebase so we can pull the current language, and query for translations against the games list of <code>LocalizationSet</code> objects. Thankfully, both of those pieces of data are stored in our <code>LocalizationConfig</code>. We'll just need to create an object that will host this data and provide some easy to use methods on top of it.</p>
<p>Enter <code>LocalizationManager</code>.</p>
<h2>LocalizationManager and the singleton problem</h2>
<p>Unity has a lot of great features but sadly dependency injection is not one of them. There are a bunch frameworks you can use to add it in but personally I've found that they slow things down or make certain Unity features harder to use. For something like accessing our localization data using a singleton pattern perfectly fine. I won't go into all the &quot;controversy&quot; around singletons here it's something you can find pretty easily with some googling. The <strong>tl;dr</strong> on them is that they are great for providing application-wide access to data, but make it easy for your application to become a tightly coupled mess, so tread carefully.</p>
<p>This code will use my own implementation of the pattern, which I've posted as <a href="https://gist.github.com/codeimpossible/06dea8032b54165df539789906fefac0">a GitHub gist</a> to avoid including more code in this post.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalizationManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">NoirSingleton<span class="token punctuation">&lt;</span>LocalizationManager<span class="token punctuation">></span></span></span> <span class="token punctuation">{</span><br>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name">LocalizationConfig</span> _config<span class="token punctuation">;</span><br><br>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token class-name">LocalizedString</span> localizedString<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _config<span class="token punctuation">.</span>LocalizationSets<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">set</span> <span class="token operator">=</span> _config<span class="token punctuation">.</span>LocalizationSets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span>name <span class="token operator">==</span> localizedString<span class="token punctuation">.</span>LocalizationSetName<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">return</span> <span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">GetItem</span><span class="token punctuation">(</span>localizedString<span class="token punctuation">.</span>KeyName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetValue</span><span class="token punctuation">(</span>_config<span class="token punctuation">.</span>CurrentLanguage<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>And with this class added to our project we can pull a translation at any time using a <code>LocalizedString</code> as our lookup, like so:</p>
<pre class="language-csharp"><code class="language-csharp">LocalizationManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">LocalizedString</span><span class="token punctuation">(</span><span class="token string">"LocalizationSetName"</span><span class="token punctuation">,</span> <span class="token string">"LocalizationKeyName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>We can also update <code>LocalizedString</code> to pull directly from the localizations data itself:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> LocalizationManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Adding <code>GetValue()</code> above will enable us to pull a translation at runtime with very few lines of code, for example we can have our UI use translations automatically.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequireComponent</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Text</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><br><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalizedUIText</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{</span><br>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token class-name">LocalizedString</span> _localizedText<span class="token punctuation">;</span><br>    <span class="token keyword">private</span> <span class="token class-name">Text</span> _text<span class="token punctuation">;</span><br><br>    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> _text <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Text<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> _text<span class="token punctuation">.</span>text <span class="token operator">=</span> _localizedText<span class="token punctuation">.</span><span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>That wraps up part 3, in the next post I'll go over build custom inspectors for some of our localization objects.</p>
<p>Until next time! You can always shoot me your thoughts on <a href="https://www.twitter.com/codeimpossible">twitter.</a></p>

        </div>
            <span style="float: left">
                <span class="uppercase text-xs mt-6">Previous</span>
                <span class="font-bold">
                    <a href="/post/Localizations-in-Unity-Part-2/">Localizations in Unity: Part 2</a>
                </span>
            </span>
        
            <span style="float: right">
                <span class="uppercase text-xs mt-6">Next</span>
                <span class="font-bold mb-2">
                    <a href="/post/Useful-code-FriendlyName/">Useful code: FriendlyName</a>
                </span>
            </span>
        
        
    </div>

    </main>
    <footer>
  <div class="container mx-auto max-w-3xl flex-grow">
    <div class="grid grid-cols-2 gap-4">
      <div>
        <p class="block text-center text-sm mb-6">
        Release: <a href="https://github.com/codeimpossible/jaredbarboza.me/commit/3ca515ebb0e0a3c427c3698782b93a4d8cd45950">3ca515eb</a>
        &copy;
        <a target="_blank" href="https://jaredbarboza.me">
          Jared Barboza
        </a> 2022.
        </p>
      </div>
      <div style="text-align: right">
        <ul>
          <li><a href="/license/">License</a></li>
          <li><a href="https://github.com/codeimpossible">GitHub</a></li>
          <li><a href="https://twitter.com/codeimpossible">Twitter</a></li>
          <li><a rel="me" href="https://mastodon.gamedev.place/@Literallyacat">Mastodon</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    <script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script>
    <script src="/assets/main.bundle.js"></script>
    <script type="text/javascript">
      (function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(".");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;"undefined"!==typeof c?a=b[c]=[]:c="mixpanel";a.people=a.people||[];a.toString=function(a){var d="mixpanel";"mixpanel"!==c&&(d+="."+c);a||(d+=" (stub)");return d};a.people.toString=function(){return a.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
      for(h=0;h<i.length;h++)g(a,i[h]);var j="set set_once union unset remove delete".split(" ");a.get_group=function(){function b(c){d[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));a.push([e,call2])}}for(var d={},e=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<j.length;c++)b(j[c]);return d};b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement("script");e.type="text/javascript";e.async=!0;e.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
      MIXPANEL_CUSTOM_LIB_URL:"file:"===f.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";g=f.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);

      // Enabling the debug mode flag is useful during implementation,
      // but it's recommended you remove it for production
      mixpanel.init('2d56400048ed4cc12effac63a51e4b4d'); 
      mixpanel.track_links("#nav a", "click nav link", {
        "referrer": document.referrer
      });
      mixpanel.track('Content View', {
        "uri": "http://jaredbarboza.me/post/Localizations-in-Unity-Part-3/"
      });
    </script>
  </body>
</html>
